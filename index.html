<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LME Trade Request Generator</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom-styles.css" />
    <link rel="manifest" href="manifest.json" />
  </head>
  <body class="page-background">
    <div class="container">
      <h1 class="page-title">LME Trade Request Generator</h1>
      <div id="company-select" class="company-selection">
        <label>
          <input
            type="radio"
            name="company"
            value="Alcast Brasil"
            checked
            class="company-radio"
          />
          Alcast Brasil
        </label>
        <label>
          <input
            type="radio"
            name="company"
            value="Alcast Trading"
            class="company-radio"
          />
          Alcast Trading
        </label>
      </div>
      <div id="trades" class="trade-section"></div>    
      <div class="output-section">
		  <h2 class="output-title">Output - Trade Request Preview</h2>
        <textarea
          id="final-output"
          class="textarea-output"
          placeholder="All trade requests will appear here..."
        ></textarea>
        <div id="trade-controls" class="controls-section">
          <button onclick="addTrade()" class="btn-primary" aria-label="Add Trade">
            Add Trade
          </button>
          <button
            onclick="copyAll()"
            class="btn-secondary"
            aria-label="Copy all generated text"
          >
            Copy All
          </button>
          <button
            onclick="shareWhatsApp()"
            class="btn-success"
            aria-label="Share via WhatsApp"
          >
            WhatsApp
          </button>
          <button
            onclick="sendEmail()"
            class="btn-email"
            aria-label="Send via Email"
          >
            E-mail
          </button>
        </div>
      </div>
    </div>

<template id="trade-template">
  <div class="trade-card">
    <div class="trade-header">
  <h2 class="trade-title">Trade 1</h2>
  <div class="template-dropdown">
    <button onclick="toggleTemplateDropdown(this)" class="btn-template">Selecionar Template ▼</button>
    <div class="dropdown-content hidden">
      <div onclick="addTemplateTrade('queda', this)">Proteção de Queda</div>
      <div onclick="addTemplateTrade('alta', this)">Proteção de Alta</div>
    </div>
  </div>
</div>

<div class="section-divider"></div>    

<div class="input-row">
  <div class="input-group">
    <label for="qty-0">Quantity (mt):</label>
    <input
      type="number"
      id="qty-0"
      class="input-field small-field"
      min="0"
      step="1"
      aria-label="Quantity in metric tons"
    />
  </div>

  <div class="input-group">
    <label for="tradeType-0">Trade Type:</label>
    <select id="tradeType-0" class="input-field small-field">
      <option value="Swap" selected>Swap</option>
      <option value="Forward">Forward</option>
    </select>
  </div>

  <div class="checkbox-group">
    <label>
      <input type="checkbox" id="syncPpt-0" />
      <span class="checkbox-label">Synchronize PPT</span>
    </label>
  </div>
</div>

<div class="section-divider"></div>

        <div class="legs-grid">
          <div class="leg-section">
            <h3 class="leg-title">Leg 1</h3>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="side1-0" value="buy" checked />
                <span>Buy</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="side1-0" value="sell" />
                <span>Sell</span>
              </label>
            </div>
            <div class="input-group">
              <label class="input-label">Price Type:</label>
              <select id="type1-0" class="input-field">
                <option value="">Select</option>
                <option value="AVG">AVG</option>
                <option value="AVGInter">AVG Period</option>
                <option value="Fix">Fix</option>
                <option value="C2R">C2R (Cash)</option>
              </select>
            </div>
            <div class="avg-fields" id="avgFields1-0">
              <div>
                <label class="field-label" for="month1-0">Month:</label>
                <select id="month1-0" class="input-field">
                  <option>January</option>
                  <option>February</option>
                  <option>March</option>
                  <option>April</option>
                  <option>May</option>
                  <option>June</option>
                  <option>July</option>
                  <option>August</option>
                  <option>September</option>
                  <option>October</option>
                  <option>November</option>
                  <option>December</option>
                </select>
              </div>
              <div>
                <label class="field-label" for="year1-0">Year:</label>
                <select id="year1-0" class="input-field"></select>
              </div>
            </div>
            <div class="input-group">
              <label class="input-label" for="startDate-0">Start Date:</label>
              <input type="date" id="startDate-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="endDate-0">End Date:</label>
              <input type="date" id="endDate-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="fixDate1-0">Fixing Date:</label>
              <input type="date" id="fixDate1-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="orderType1-0">Order Type:</label>
              <select id="orderType1-0" class="input-field">
                <option value="At Market" selected>At Market</option>
                <option value="">Select</option>                
                <option value="Limit">Limit</option>
                <option value="Resting">Resting</option>
              </select>
            </div>
            <div class="input-group">
              <label class="input-label" for="orderValidity1-0">Order Validity:</label>
              <select id="orderValidity1-0" class="input-field">
                <option value="">Select</option>
                <option value="Day">Day</option>
                <option value="GTC">GTC</option>
                <option value="3 Hours">3 Hours</option>
                <option value="6 Hours">6 Hours</option>
                <option value="12 Hours">12 Hours</option>
                <option value="Until Further Notice">Until Further Notice</option>
              </select>
            </div>
            <div class="input-group">
              <label class="input-label" for="limitPrice1-0">Limit Price:</label>
              <input type="number" id="limitPrice1-0" class="input-field" step="0.01" />
            </div>
          </div>
          <div class="leg-section">
            <h3 class="leg-title">Leg 2</h3>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="side2-0" value="buy" checked />
                <span>Buy</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="side2-0" value="sell" />
                <span>Sell</span>
              </label>
            </div>
            <div class="input-group">
              <label class="input-label">Price Type:</label>
              <select id="type2-0" class="input-field">
                <option value="">Select</option>
                <option value="AVG">AVG</option>
                <option value="AVGInter">AVG Period</option>
                <option value="Fix">Fix</option>
                <option value="C2R">C2R (Cash)</option>
              </select>
            </div>
            <div class="avg-fields" id="avgFields2-0">
              <div>
                <label class="field-label" for="month2-0">Month:</label>
                <select id="month2-0" class="input-field">
                  <option>January</option>
                  <option>February</option>
                  <option>March</option>
                  <option>April</option>
                  <option>May</option>
                  <option>June</option>
                  <option>July</option>
                  <option>August</option>
                  <option>September</option>
                  <option>October</option>
                  <option>November</option>
                  <option>December</option>
                </select>
              </div>
              <div>
                <label class="field-label" for="year2-0">Year:</label>
                <select id="year2-0" class="input-field"></select>
              </div>
            </div>
            <div class="input-group">
              <label class="input-label" for="startDate2-0">Start Date:</label>
              <input type="date" id="startDate2-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="endDate2-0">End Date:</label>
              <input type="date" id="endDate2-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="fixDate-0">Fixing Date:</label>
              <input type="date" id="fixDate-0" class="input-field" />
            </div>
            <div class="input-group">
              <label class="input-label" for="orderType2-0">Order Type:</label>
              <select id="orderType2-0" class="input-field">
                <option value="">Select</option>
                <option value="At Market" selected>At Market</option>
                <option value="Limit">Limit</option>
                <option value="Resting">Resting</option>
              </select>
            </div>
            <div class="input-group">
              <label class="input-label" for="orderValidity2-0">Order Validity:</label>
              <select id="orderValidity2-0" class="input-field">
                <option value="">Select</option>
                <option value="Day">Day</option>
                <option value="GTC">GTC</option>
                <option value="3 Hours">3 Hours</option>
                <option value="6 Hours">6 Hours</option>
                <option value="12 Hours">12 Hours</option>
                <option value="Until Further Notice">Until Further Notice</option>
              </select>
            </div>
            <div class="input-group">
              <label class="input-label" for="limitPrice2-0">Limit Price:</label>
              <input type="number" id="limitPrice2-0" class="input-field" step="0.01" />
            </div>
          </div>
        </div>

<div class="section-divider"></div>

        <div class="trade-buttons">
          <button name="generate" class="btn-primary">Generate</button>
          <button name="clear" class="btn-secondary">Clear</button>
          <button name="remove" class="btn-danger">Remove</button>
          <button onclick="openExternalSite()" class="btn-secondary">LME Live</button>
        </div>
        <p id="output-0" class="output-text"></p>
      </div>
    </template>

<div id="iframe-modal" class="modal-container hidden">
  <div class="modal-box modal-box-styles">
    <div class="modal-header">
      <button onclick="closeIframeModal()" class="btn-danger">Fechar</button>
    </div>
    <iframe id="external-iframe" src="" class="iframe-styles" title="External Content"></iframe>
    <iframe sandbox="allow-same-origin allow-scripts allow-forms" title="Accessible Frame"></iframe>
  </div>
</div>

</div>
    <div id="confirmation-modal" class="modal-container hidden">
      <div class="modal-box">
        <h2 class="modal-title">Confirmação</h2>
        <p id="confirmation-text" class="modal-text"></p>
        <div class="modal-buttons">
          <button
            id="confirmation-cancel"
            onclick="cancelModal()"
            class="btn-danger"
          >
            Cancel
          </button>
          <button
            id="confirmation-ok"
            onclick="confirmModal()"
            class="btn-primary"
          >
            Confirm
          </button>
        </div>
      </div>
    </div>

    <script src="solarlunar.min.js"></script>
    <script src="calendar-utils.js"></script>
    <script src="main.js"></script>
  </body>
</html>
